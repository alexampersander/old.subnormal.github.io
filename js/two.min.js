(function(){function p(g,a,b){if(g===a)return 0!==g||1/g==1/a;if(null==g||null==a)return g===a;g._chain&&(g=g._wrapped);a._chain&&(a=a._wrapped);if(g.isEqual&&d.isFunction(g.isEqual))return g.isEqual(a);if(a.isEqual&&d.isFunction(a.isEqual))return a.isEqual(g);var f=r.call(g);if(f!=r.call(a))return!1;switch(f){case "[object String]":return g==String(a);case "[object Number]":return g!=+g?a!=+a:0==g?1/g==1/a:g==+a;case "[object Date]":case "[object Boolean]":return+g==+a;case "[object RegExp]":return g.source==
a.source&&g.global==a.global&&g.multiline==a.multiline&&g.ignoreCase==a.ignoreCase}if("object"!=typeof g||"object"!=typeof a)return!1;for(var c=b.length;c--;)if(b[c]==g)return!0;b.push(g);var c=0,n=!0;if("[object Array]"==f){if(c=g.length,n=c==a.length)for(;c--&&(n=c in g==c in a&&p(g[c],a[c],b)););}else{if("constructor"in g!="constructor"in a||g.constructor!=a.constructor)return!1;for(var h in g)if(d.has(g,h)&&(c++,!(n=d.has(a,h)&&p(g[h],a[h],b))))break;if(n){for(h in a)if(d.has(a,h)&&!c--)break;
n=!c}}b.pop();return n}var l=this,e=l._,j={},k=Array.prototype,c=Object.prototype,b=k.slice,h=k.unshift,r=c.toString,a=c.hasOwnProperty,m=k.forEach,q=k.map,v=k.reduce,f=k.reduceRight,A=k.filter,y=k.every,u=k.some,s=k.indexOf,w=k.lastIndexOf,c=Array.isArray,n=Object.keys,t=Function.prototype.bind,d=function(g){return new G(g)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):l._=d;d.VERSION="1.3.3";var x=d.each=d.forEach=function(g,
a,b){if(null!=g)if(m&&g.forEach===m)g.forEach(a,b);else if(g.length===+g.length)for(var f=0,c=g.length;f<c&&!(f in g&&a.call(b,g[f],f,g)===j);f++);else for(f in g)if(d.has(g,f)&&a.call(b,g[f],f,g)===j)break};d.map=d.collect=function(g,d,a){var b=[];if(null==g)return b;if(q&&g.map===q)return g.map(d,a);x(g,function(g,f,c){b[b.length]=d.call(a,g,f,c)});g.length===+g.length&&(b.length=g.length);return b};d.reduce=d.foldl=d.inject=function(g,a,b,f){var c=2<arguments.length;null==g&&(g=[]);if(v&&g.reduce===
v)return f&&(a=d.bind(a,f)),c?g.reduce(a,b):g.reduce(a);x(g,function(g,d,n){c?b=a.call(f,b,g,d,n):(b=g,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return b};d.reduceRight=d.foldr=function(g,a,b,c){var n=2<arguments.length;null==g&&(g=[]);if(f&&g.reduceRight===f)return c&&(a=d.bind(a,c)),n?g.reduceRight(a,b):g.reduceRight(a);var h=d.toArray(g).reverse();c&&!n&&(a=d.bind(a,c));return n?d.reduce(h,a,b,c):d.reduce(h,a)};d.find=d.detect=function(g,d,a){var b;z(g,function(g,
f,c){if(d.call(a,g,f,c))return b=g,!0});return b};d.filter=d.select=function(g,d,a){var b=[];if(null==g)return b;if(A&&g.filter===A)return g.filter(d,a);x(g,function(g,f,c){d.call(a,g,f,c)&&(b[b.length]=g)});return b};d.reject=function(g,d,a){var b=[];if(null==g)return b;x(g,function(g,f,c){d.call(a,g,f,c)||(b[b.length]=g)});return b};d.every=d.all=function(g,d,a){var b=!0;if(null==g)return b;if(y&&g.every===y)return g.every(d,a);x(g,function(g,f,c){if(!(b=b&&d.call(a,g,f,c)))return j});return!!b};
var z=d.some=d.any=function(g,a,b){a||(a=d.identity);var f=!1;if(null==g)return f;if(u&&g.some===u)return g.some(a,b);x(g,function(g,d,c){if(f||(f=a.call(b,g,d,c)))return j});return!!f};d.include=d.contains=function(g,a){var d=!1;return null==g?d:s&&g.indexOf===s?-1!=g.indexOf(a):d=z(g,function(g){return g===a})};d.invoke=function(g,a){var f=b.call(arguments,2);return d.map(g,function(g){return(d.isFunction(a)?a||g:g[a]).apply(g,f)})};d.pluck=function(g,a){return d.map(g,function(g){return g[a]})};
d.max=function(g,a,b){if(!a&&d.isArray(g)&&g[0]===+g[0])return Math.max.apply(Math,g);if(!a&&d.isEmpty(g))return-Infinity;var f={computed:-Infinity};x(g,function(g,d,c){d=a?a.call(b,g,d,c):g;d>=f.computed&&(f={value:g,computed:d})});return f.value};d.min=function(g,a,b){if(!a&&d.isArray(g)&&g[0]===+g[0])return Math.min.apply(Math,g);if(!a&&d.isEmpty(g))return Infinity;var f={computed:Infinity};x(g,function(g,d,c){d=a?a.call(b,g,d,c):g;d<f.computed&&(f={value:g,computed:d})});return f.value};d.shuffle=
function(g){var a=[],d;x(g,function(g,b){d=Math.floor(Math.random()*(b+1));a[b]=a[d];a[d]=g});return a};d.sortBy=function(g,a,b){var f=d.isFunction(a)?a:function(g){return g[a]};return d.pluck(d.map(g,function(g,a,d){return{value:g,criteria:f.call(b,g,a,d)}}).sort(function(g,a){var d=g.criteria,b=a.criteria;return void 0===d?1:void 0===b?-1:d<b?-1:d>b?1:0}),"value")};d.groupBy=function(g,a){var b={},f=d.isFunction(a)?a:function(g){return g[a]};x(g,function(g,a){var d=f(g,a);(b[d]||(b[d]=[])).push(g)});
return b};d.sortedIndex=function(g,a,b){b||(b=d.identity);for(var f=0,c=g.length;f<c;){var n=f+c>>1;b(g[n])<b(a)?f=n+1:c=n}return f};d.toArray=function(g){return!g?[]:d.isArray(g)||d.isArguments(g)?b.call(g):g.toArray&&d.isFunction(g.toArray)?g.toArray():d.values(g)};d.size=function(g){return d.isArray(g)?g.length:d.keys(g).length};d.first=d.head=d.take=function(g,a,d){return null!=a&&!d?b.call(g,0,a):g[0]};d.initial=function(g,a,d){return b.call(g,0,g.length-(null==a||d?1:a))};d.last=function(a,
d,f){return null!=d&&!f?b.call(a,Math.max(a.length-d,0)):a[a.length-1]};d.rest=d.tail=function(a,d,f){return b.call(a,null==d||f?1:d)};d.compact=function(a){return d.filter(a,function(a){return!!a})};d.flatten=function(a,b){return d.reduce(a,function(a,g){if(d.isArray(g))return a.concat(b?g:d.flatten(g));a[a.length]=g;return a},[])};d.without=function(a){return d.difference(a,b.call(arguments,1))};d.uniq=d.unique=function(a,b,f){f=f?d.map(a,f):a;var c=[];3>a.length&&(b=!0);d.reduce(f,function(f,n,
h){if(b?d.last(f)!==n||!f.length:!d.include(f,n))f.push(n),c.push(a[h]);return f},[]);return c};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=d.intersect=function(a){var f=b.call(arguments,1);return d.filter(d.uniq(a),function(a){return d.every(f,function(g){return 0<=d.indexOf(g,a)})})};d.difference=function(a){var f=d.flatten(b.call(arguments,1),!0);return d.filter(a,function(a){return!d.include(f,a)})};d.zip=function(){for(var a=b.call(arguments),f=d.max(d.pluck(a,"length")),
c=Array(f),n=0;n<f;n++)c[n]=d.pluck(a,""+n);return c};d.indexOf=function(a,b,f){if(null==a)return-1;var c;if(f)return f=d.sortedIndex(a,b),a[f]===b?f:-1;if(s&&a.indexOf===s)return a.indexOf(b);f=0;for(c=a.length;f<c;f++)if(f in a&&a[f]===b)return f;return-1};d.lastIndexOf=function(a,d){if(null==a)return-1;if(w&&a.lastIndexOf===w)return a.lastIndexOf(d);for(var b=a.length;b--;)if(b in a&&a[b]===d)return b;return-1};d.range=function(a,d,b){1>=arguments.length&&(d=a||0,a=0);b=arguments[2]||1;for(var f=
Math.max(Math.ceil((d-a)/b),0),c=0,n=Array(f);c<f;)n[c++]=a,a+=b;return n};var K=function(){};d.bind=function(a,f){var c,n;if(a.bind===t&&t)return t.apply(a,b.call(arguments,1));if(!d.isFunction(a))throw new TypeError;n=b.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(f,n.concat(b.call(arguments)));K.prototype=a.prototype;var d=new K,h=a.apply(d,n.concat(b.call(arguments)));return Object(h)===h?h:d}};d.bindAll=function(a){var f=b.call(arguments,1);0==f.length&&(f=d.functions(a));
x(f,function(b){a[b]=d.bind(a[b],a)});return a};d.memoize=function(a,b){var f={};b||(b=d.identity);return function(){var c=b.apply(this,arguments);return d.has(f,c)?f[c]:f[c]=a.apply(this,arguments)}};d.delay=function(a,d){var f=b.call(arguments,2);return setTimeout(function(){return a.apply(null,f)},d)};d.defer=function(a){return d.delay.apply(d,[a,1].concat(b.call(arguments,1)))};d.throttle=function(a,b){var f,c,n,h,m,t,k=d.debounce(function(){m=h=!1},b);return function(){f=this;c=arguments;n||
(n=setTimeout(function(){n=null;m&&a.apply(f,c);k()},b));h?m=!0:t=a.apply(f,c);k();h=!0;return t}};d.debounce=function(a,d,b){var f;return function(){var c=this,n=arguments;b&&!f&&a.apply(c,n);clearTimeout(f);f=setTimeout(function(){f=null;b||a.apply(c,n)},d)}};d.once=function(a){var d=!1,b;return function(){if(d)return b;d=!0;return b=a.apply(this,arguments)}};d.wrap=function(a,d){return function(){var f=[a].concat(b.call(arguments,0));return d.apply(this,f)}};d.compose=function(){var a=arguments;
return function(){for(var d=arguments,b=a.length-1;0<=b;b--)d=[a[b].apply(this,d)];return d[0]}};d.after=function(a,d){return 0>=a?d():function(){if(1>--a)return d.apply(this,arguments)}};d.keys=n||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],f;for(f in a)d.has(a,f)&&(b[b.length]=f);return b};d.values=function(a){return d.map(a,d.identity)};d.functions=d.methods=function(a){var b=[],f;for(f in a)d.isFunction(a[f])&&b.push(f);return b.sort()};d.extend=function(a){x(b.call(arguments,
1),function(d){for(var b in d)a[b]=d[b]});return a};d.pick=function(a){var f={};x(d.flatten(b.call(arguments,1)),function(d){d in a&&(f[d]=a[d])});return f};d.defaults=function(a){x(b.call(arguments,1),function(d){for(var b in d)null==a[b]&&(a[b]=d[b])});return a};d.clone=function(a){return!d.isObject(a)?a:d.isArray(a)?a.slice():d.extend({},a)};d.tap=function(a,d){d(a);return a};d.isEqual=function(a,d){return p(a,d,[])};d.isEmpty=function(a){if(null==a)return!0;if(d.isArray(a)||d.isString(a))return 0===
a.length;for(var b in a)if(d.has(a,b))return!1;return!0};d.isElement=function(a){return!!(a&&1==a.nodeType)};d.isArray=c||function(a){return"[object Array]"==r.call(a)};d.isObject=function(a){return a===Object(a)};d.isArguments=function(a){return"[object Arguments]"==r.call(a)};d.isArguments(arguments)||(d.isArguments=function(a){return!(!a||!d.has(a,"callee"))});d.isFunction=function(a){return"[object Function]"==r.call(a)};d.isString=function(a){return"[object String]"==r.call(a)};d.isNumber=function(a){return"[object Number]"==
r.call(a)};d.isFinite=function(a){return d.isNumber(a)&&isFinite(a)};d.isNaN=function(a){return a!==a};d.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==r.call(a)};d.isDate=function(a){return"[object Date]"==r.call(a)};d.isRegExp=function(a){return"[object RegExp]"==r.call(a)};d.isNull=function(a){return null===a};d.isUndefined=function(a){return void 0===a};d.has=function(d,b){return a.call(d,b)};d.noConflict=function(){l._=e;return this};d.identity=function(a){return a};d.times=
function(a,d,b){for(var f=0;f<a;f++)d.call(b,f)};d.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.result=function(a,b){if(null==a)return null;var f=a[b];return d.isFunction(f)?f.call(a):f};d.mixin=function(a){x(d.functions(a),function(f){var c=d[f]=a[f];G.prototype[f]=function(){var a=b.call(arguments);h.call(a,this._wrapped);return M(c.apply(d,a),this._chain)}})};var F=0;d.uniqueId=
function(a){var d=F++;return a?a+d:d};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,L={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},N;for(N in L)L[L[N]]=N;var T=/\\|'|\r|\n|\t|\u2028|\u2029/g,U=/\\(\\|'|r|n|t|u2028|u2029)/g,O=function(a){return a.replace(U,function(a,d){return L[d]})};d.template=function(a,b,f){f=d.defaults(f||{},d.templateSettings);a="__p+='"+a.replace(T,function(a){return"\\"+L[a]}).replace(f.escape||
C,function(a,d){return"'+\n_.escape("+O(d)+")+\n'"}).replace(f.interpolate||C,function(a,d){return"'+\n("+O(d)+")+\n'"}).replace(f.evaluate||C,function(a,d){return"';\n"+O(d)+"\n;__p+='"})+"';\n";f.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var c=new Function(f.variable||"obj","_",a);if(b)return c(b,d);b=function(a){return c.call(this,a,d)};b.source="function("+(f.variable||"obj")+"){\n"+a+"}";return b};
d.chain=function(a){return d(a).chain()};var G=function(a){this._wrapped=a};d.prototype=G.prototype;var M=function(a,b){return b?d(a).chain():a};d.mixin(d);x("pop push reverse shift sort splice unshift".split(" "),function(a){var d=k[a];G.prototype[a]=function(){var b=this._wrapped;d.apply(b,arguments);var f=b.length;("shift"==a||"splice"==a)&&0===f&&delete b[0];return M(b,this._chain)}});x(["concat","join","slice"],function(a){var d=k[a];G.prototype[a]=function(){return M(d.apply(this._wrapped,arguments),
this._chain)}});G.prototype.chain=function(){this._chain=!0;return this};G.prototype.value=function(){return this._wrapped}}).call(this);var Backbone=Backbone||{};
(function(){var p=[].slice,l=function(e,k,c){var b;e=-1;var h=k.length;switch(c.length){case 0:for(;++e<h;)(b=k[e]).callback.call(b.ctx);break;case 1:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0]);break;case 2:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0],c[1]);break;case 3:for(;++e<h;)(b=k[e]).callback.call(b.ctx,c[0],c[1],c[2]);break;default:for(;++e<h;)(b=k[e]).callback.apply(b.ctx,c)}},e=Backbone.Events={on:function(e,k,c){this._events||(this._events={});(this._events[e]||(this._events[e]=[])).push({callback:k,
context:c,ctx:c||this});return this},once:function(e,k,c){var b=this,h=_.once(function(){b.off(e,h);k.apply(this,arguments)});h._callback=k;this.on(e,h,c);return this},off:function(e,k,c){var b,h,r,a,m,q,v,f;if(!this._events)return this;if(!e&&!k&&!c)return this._events={},this;a=e?[e]:_.keys(this._events);m=0;for(q=a.length;m<q;m++)if(e=a[m],b=this._events[e]){r=[];if(k||c){v=0;for(f=b.length;v<f;v++)h=b[v],(k&&k!==(h.callback._callback||h.callback)||c&&c!==h.context)&&r.push(h)}this._events[e]=
r}return this},trigger:function(e){if(!this._events)return this;var k=p.call(arguments,1),c=this._events[e],b=this._events.all;c&&l(this,c,k);b&&l(this,b,arguments);return this},listenTo:function(e,k,c){var b=this._listeners||(this._listeners={}),h=e._listenerId||(e._listenerId=_.uniqueId("l"));b[h]=e;e.on(k,c||this,this);return this},stopListening:function(e,k,c){var b=this._listeners;if(b){if(e)e.off(k,c,this),!k&&!c&&delete b[e._listenerId];else{for(var h in b)b[h].off(null,null,this);this._listeners=
{}}return this}}};e.bind=e.on;e.unbind=e.off})();(function(){for(var p=0,l=["ms","moz","webkit","o"],e=0;e<l.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[l[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[l[e]+"CancelAnimationFrame"]||window[l[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var k=(new Date).getTime(),c=Math.max(0,16-(k-p)),b=window.setTimeout(function(){e(k+c)},c);p=k+c;return b});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(e){clearTimeout(e)})})();(function(){function p(){var a=document.body.getBoundingClientRect(),b=this.width=a.width,a=this.height=a.height;this.renderer.setSize(b,a);this.trigger(f.Events.resize,b,a)}var l=this,e=l.Two||{},j=Math.sin,k=Math.cos,c=Math.atan2,b=Math.sqrt,h=Math.abs,r=Math.PI,a=2*r,m=r/2,q=Math.pow,v={hasEventListeners:_.isFunction(l.addEventListener),bind:function(a,b,d,f){this.hasEventListeners?a.addEventListener(b,d,!!f):a.attachEvent("on"+b,d);return this},unbind:function(a,b,d,f){this.hasEventListeners?
a.removeEventListeners(b,d,!!f):a.detachEvent("on"+b,d);return this}},f=l.Two=function(a){a=_.defaults(a||{},{fullscreen:!1,width:640,height:480,type:f.Types.svg,autostart:!1});this.type=a.type;this.renderer=new f[this.type](this);f.Utils.setPlaying.call(this,a.autostart);this.frameCount=0;a.fullscreen?(a=_.bind(p,this),_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,
left:0,right:0,bottom:0,position:"fixed"}),v.bind(window,"resize",a),a()):(this.renderer.setSize(a.width,a.height),this.width=a.width,this.height=a.height);this.scene=new f.Group;this.renderer.add(this.scene);f.Instances.push(this)};_.extend(f,{Array:l.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.2.1",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",
remove:"remove",insert:"insert"},Resolution:8,Instances:[],noConflict:function(){l.Two=e;return this},Utils:{Curve:{CollinearityEpsilon:q(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:0.25,angle:0,epsilon:0.01}},setPlaying:function(a){_.defer(_.bind(function(){this.playing=!!a},this))},getComputedMatrix:function(a){for(var b=new f.Matrix;a&&a._matrix;){var d=a._matrix.elements;b.multiply(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9]);a=a.parent}return b},applySvgAttributes:function(a,
b){b.cap="butt";b.join="bevel";_.each(a.attributes,function(a){switch(a.nodeName){case "visibility":b.visible=!!a.nodeValue;break;case "stroke-linecap":b.cap=a.nodeValue;break;case "stroke-linejoin":b.join=a.nodeValue;break;case "stroke-miterlimit":b.miter=a.nodeValue;break;case "stroke-width":b.linewidth=parseFloat(a.nodeValue);break;case "stroke-opacity":case "fill-opacity":b.opacity=a.nodeValue;break;case "fill":b.fill=a.nodeValue;break;case "stroke":b.stroke=a.nodeValue}});return b},read:{svg:function(){return f.Utils.read.g.apply(this,
arguments)},g:function(a){var b=new f.Group;this.add(b);_.each(a.childNodes,function(a){if(a.localName){var c=a.localName.toLowerCase();c in f.Utils.read&&(a=f.Utils.read[c].call(this,a),b.add(a))}},this);return f.Utils.applySvgAttributes(a,b)},polygon:function(a,b){var d=a.points;if(d){var c=_.map(_.range(d.numberOfItems),function(a){a=d.getItem(a);return new f.Vector(a.x,a.y)}),c=(new f.Polygon(c,!b)).noStroke();return f.Utils.applySvgAttributes(a,c)}},polyline:function(a){return f.Utils.read.polygon(a,
!0)},path:function(a){var b=a.getAttribute("d"),b=_.flatten(_.map(_.compact(b.split(/M/g)),function(a){a=_.map(_.compact(a.split(/m/g)),function(a,d){return 0>=d?a:"m"+a});a[0]="M"+a[0];return a})),d=new f.Vector,c=new f.Vector,b=_.map(b,function(b){var h,e=!1,m=!1;b=_.flatten(_.map(b.match(/[a-z][^a-z]*/ig),function(a){var b,n,k=a[0],t=k.toLowerCase();h=a.slice(1).trim().split(/[\s,]+|(?=[+\-])/);e=k===t;var q,r,g;switch(t){case "z":m=!0;break;case "m":case "l":n=parseFloat(h[0]);b=parseFloat(h[1]);
b=new f.Vector(n,b);e&&b.addSelf(d);d.copy(b);break;case "h":case "v":n="h"===t?"x":"y";a="x"===n?"y":"x";b=new f.Vector;b[n]=parseFloat(h[0]);b[a]=d[a];e&&(b[n]+=d[n]);d.copy(b);break;case "s":case "c":b=d.x;a=d.y;"c"===t?(k=parseFloat(h[0]),n=parseFloat(h[1]),t=parseFloat(h[2]),q=parseFloat(h[3]),r=parseFloat(h[4]),g=parseFloat(h[5])):(q=f.Utils.getReflection(d,c,e),k=q.x,n=q.y,t=parseFloat(h[0]),q=parseFloat(h[1]),r=parseFloat(h[2]),g=parseFloat(h[3]));e&&(k+=b,n+=a,t+=b,q+=a,r+=b,g+=a);b=f.Utils.subdivide(b,
a,k,n,t,q,r,g);d.set(r,g);c.set(t,q);(n=b[b.length-1])&&!n.equals(d)&&b.push(d.clone());break;case "t":case "q":b=d.x;a=d.y;c.isZero()?(k=b,n=a):(k=c.x,a=c.y);"q"===t?(t=parseFloat(h[0]),q=parseFloat(h[1]),r=parseFloat(h[1]),g=parseFloat(h[2])):(q=f.Utils.getReflection(d,c,e),t=q.x,q=q.y,r=parseFloat(h[0]),g=parseFloat(h[1]));e&&(k+=b,n+=a,t+=b,q+=a,r+=b,g+=a);b=f.Utils.subdivide(b,a,k,n,t,q,r,g);d.set(r,g);c.set(t,q);n=b[b.length-1];n.equals(d)||b.push(d.clone());break;case "a":throw new f.Utils.Error("not yet able to interpret Elliptical Arcs.");
}return b}));if(!(1>=b.length))return b=_.compact(b),b=(new f.Polygon(b,m)).noStroke(),f.Utils.applySvgAttributes(a,b)});return _.compact(b)},circle:function(b){var c=parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),h=parseFloat(b.getAttribute("r")),e=f.Resolution,m=_.map(_.range(e),function(b){var d=b/e*a;b=h*k(d);d=h*j(d);return new f.Vector(b,d)},this),m=(new f.Polygon(m,!0,!0)).noStroke();m.translation.set(c,d);return f.Utils.applySvgAttributes(b,m)},ellipse:function(b){var c=
parseFloat(b.getAttribute("cx")),d=parseFloat(b.getAttribute("cy")),h=parseFloat(b.getAttribute("rx")),e=parseFloat(b.getAttribute("ry")),m=f.Resolution,q=_.map(_.range(m),function(b){var d=b/m*a;b=h*k(d);d=e*j(d);return new f.Vector(b,d)},this),q=(new f.Polygon(q,!0,!0)).noStroke();q.translation.set(c,d);return f.Utils.applySvgAttributes(b,q)},rect:function(a){var b=parseFloat(a.getAttribute("x")),d=parseFloat(a.getAttribute("y")),c=parseFloat(a.getAttribute("width")),h=parseFloat(a.getAttribute("height")),
c=c/2,h=h/2,e=[new f.Vector(c,h),new f.Vector(-c,h),new f.Vector(-c,-h),new f.Vector(c,-h)],e=(new f.Polygon(e,!0)).noStroke();e.translation.set(b+c,d+h);return f.Utils.applySvgAttributes(a,e)},line:function(a){var b=parseFloat(a.getAttribute("x1")),d=parseFloat(a.getAttribute("y1")),c=parseFloat(a.getAttribute("x2")),h=parseFloat(a.getAttribute("y2")),c=(c-b)/2,h=(h-d)/2,e=[new f.Vector(-c,-h),new f.Vector(c,h)],e=(new f.Polygon(e)).noFill();e.translation.set(b+c,d+h);return f.Utils.applySvgAttributes(a,
e)}},subdivide:function(b,e,d,m,k,q,v,j,A){var l=f.Utils.Curve.CollinearityEpsilon,y=f.Utils.Curve.RecursionLimit,s=f.Utils.Curve.CuspLimit,u=f.Utils.Curve.Tolerance,p;A=A||0;if(A>y)return[];var y=(b+d)/2,w=(e+m)/2,g=(d+k)/2,J=(m+q)/2,P=(k+v)/2,Q=(q+j)/2,R=(y+g)/2,S=(w+J)/2,g=(g+P)/2,J=(J+Q)/2,D=(R+g)/2,E=(S+J)/2;p=v-b;var B=j-e,H=h((d-v)*B-(m-j)*p),I=h((k-v)*B-(q-j)*p);if(0<A){if(H>l&&I>l&&(H+I)*(H+I)<=u.distance*(p*p+B*B)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];p=c(q-m,k-d);l=h(p-c(m-e,
d-b));p=h(c(j-q,v-k)-p);l>=r&&(l=a-l);p>=r&&(p=a-p);if(l+p<u.angle)return[new f.Vector(D,E)];if(0!==s){if(l>s)return[new f.Vector(d,m)];if(p>s)return[new f.Vector(k,q)]}}}else if(H>l)if(H*H<=u.distance*(p*p+B*B)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];l=h(c(q-m,k-d)-c(m-e,d-b));l>=r&&(l=a-l);if(l<u.angle)return[new f.Vector(d,m),new f.Vector(k,q)];if(0!==s&&l>s)return[new f.Vector(d,m)]}else if(I>l){if(I*I<=u.distance*(p*p+B*B)){if(u.angle<u.epsilon)return[new f.Vector(D,E)];l=h(c(j-q,v-k)-
c(q-m,k-d));l>=r&&(l=a-l);if(l<u.angle)return[new f.Vector(d,m),new f.Vector(k,q)];if(0!==s&&l>s)return[new f.Vector2(k,q)]}}else if(p=D-(b+v)/2,B=E-(e+j)/2,p*p+B*B<=u.distance)return[new f.Vector(D,E)];return f.Utils.subdivide(b,e,y,w,R,S,D,E,A+1).concat(f.Utils.subdivide(D,E,g,J,P,Q,v,j,A+1))},getCurveFromPoints:function(a,b){for(var d=[],f=a.length,c=f-1,h=0;h<f;h++){var e=a[h],m={x:e.x,y:e.y};d.push(m);var e=b?w(h-1,f):Math.max(h-1,0),k=b?w(h+1,f):Math.min(h+1,c);s(a[e],m,a[k]);!m.u.x&&!m.u.y&&
(m.u.x=m.x,m.u.y=m.y);!m.v.x&&!m.v.y&&(m.v.x=m.x,m.v.y=m.y)}return d},getControlPoints:function(a,b,d){var f=u(a,b),c=u(d,b);a=A(a,b);d=A(d,b);var h=(f+c)/2;if(1E-4>a||1E-4>d)return b.u={x:b.x,y:b.y},b.v={x:b.x,y:b.y},b;a*=0.33;d*=0.33;h=c<f?h+m:h-m;f={x:b.x+k(h)*a,y:b.y+j(h)*a};h-=r;c={x:b.x+k(h)*d,y:b.y+j(h)*d};b.u=f;b.v=c;return b},getReflection:function(a,b,d){var c=a.distanceTo(b);if(1E-4>=c)return d?new f.Vector:a.clone();b=u(a,b);return new f.Vector(c*Math.cos(b)+(d?0:a.x),c*Math.sin(b)+(d?
0:a.y))},angleBetween:function(a,b){return c(a.y-b.y,a.x-b.x)},distanceBetweenSquared:function(a,b){var d=a.x-b.x,f=a.y-b.y;return d*d+f*f},distanceBetween:function(a,f){return b(y(a,f))},mod:function(a,b){for(;0>a;)a+=b;return a%b},Collection:function(){Array.call(this);1<arguments.length?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js";this.message=a}}});f.Utils.Error.prototype=
Error();f.Utils.Error.prototype.constructor=f.Utils.Error;f.Utils.Collection.prototype=[];f.Utils.Collection.constructor=f.Utils.Collection;_.extend(f.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=Array.prototype.pop.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);this.trigger(f.Events.remove,[a]);return a},push:function(){var a=Array.prototype.push.apply(this,arguments);this.trigger(f.Events.insert,
arguments);return a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);this.trigger(f.Events.insert,arguments);return a},splice:function(){var a=Array.prototype.splice.apply(this,arguments),b;this.trigger(f.Events.remove,a);2<arguments.length&&(b=this.slice(arguments[0],arguments.length-2),this.trigger(f.Events.insert,b));return a}});var A=f.Utils.distanceBetween,y=f.Utils.distanceBetweenSquared,u=f.Utils.angleBetween,s=f.Utils.getControlPoints,w=f.Utils.mod;_.extend(f.prototype,
Backbone.Events,{appendTo:function(a){a.appendChild(this.renderer.domElement);return this},play:function(){f.Utils.setPlaying.call(this,!0);return this.trigger(f.Events.play)},pause:function(){this.playing=!1;return this.trigger(f.Events.pause)},update:function(){_.defer(_.bind(function(){var a=!!this._lastFrame,b=(window.performance&&window.performance.now?window.performance:Date).now();this.frameCount++;a&&(this.timeDelta=parseFloat((b-this._lastFrame).toFixed(3)));this._lastFrame=b;var a=this.width,
b=this.height,d=this.renderer;(a!==d.width||b!==d.height)&&d.setSize(a,b);this.trigger(f.Events.update,this.frameCount,this.timeDelta);this.render()},this));return this},render:function(){this.renderer.render();return this.trigger(f.Events.render,this.frameCount)},add:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.add(b);return this},remove:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));this.scene.remove(b);return this},clear:function(){_.each(this.scene.children,
function(a){a.remove()});return this},makeLine:function(a,b,d,c){d=(d-a)/2;c=(c-b)/2;var h=[new f.Vector(-d,-c),new f.Vector(d,c)],h=(new f.Polygon(h)).noFill();h.translation.set(a+d,b+c);this.scene.add(h);return h},makeRectangle:function(a,b,d,c){d/=2;c/=2;c=[new f.Vector(d,c),new f.Vector(-d,c),new f.Vector(-d,-c),new f.Vector(d,-c)];c=new f.Polygon(c,!0);c.translation.set(a,b);this.scene.add(c);return c},makeCircle:function(a,b,d){return this.makeEllipse(a,b,d,d)},makeEllipse:function(b,c,d,h){var e=
f.Resolution,m=_.map(_.range(e),function(b){var c=b/e*a;b=d*k(c);c=h*j(c);return new f.Vector(b,c)},this),m=new f.Polygon(m,!0,!0);m.translation.set(b,c);this.scene.add(m);return m},makeCurve:function(a){var b=arguments.length,d=a;if(!_.isArray(a))for(var d=[],c=0;c<b;c+=2){var h=arguments[c];if(!_.isNumber(h))break;d.push(new f.Vector(h,arguments[c+1]))}var b=arguments[b-1],d=new f.Polygon(d,!(_.isBoolean(b)&&b),!0),b=d.getBoundingClientRect(),e=b.left+b.width/2,m=b.top+b.height/2;_.each(d.vertices,
function(a){a.x-=e;a.y-=m});d.translation.set(e,m);this.scene.add(d);return d},makePolygon:function(a){var b=arguments.length,d=a;if(!_.isArray(a))for(var d=[],c=0;c<b;c+=2){var h=arguments[c];if(!_.isNumber(h))break;d.push(new f.Vector(h,arguments[c+1]))}b=arguments[b-1];d=new f.Polygon(d,!(_.isBoolean(b)&&b));b=d.getBoundingClientRect();d.center().translation.set(b.left+b.width/2,b.top+b.height/2);this.scene.add(d);return d},makeGroup:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));var d=
new f.Group;this.scene.add(d);d.add(b);return d},interpret:function(a){var b=a.tagName.toLowerCase();if(!(b in f.Utils.read))return null;a=f.Utils.read[b].call(this,a);this.add(a);return a}});(function(){_.each(f.Instances,function(a){a.playing&&a.update()});requestAnimationFrame(arguments.callee)})();"function"===typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof module&&module.exports&&(module.exports=f)})();(function(){var p=Two.Vector=function(e,j){this.x=e||0;this.y=j||0};_.extend(p,{MakeGetterSetter:function(e,j,k){var c="_"+j;Object.defineProperty(e,j,{get:function(){return this[c]},set:function(b){this[c]=b;this.trigger(Two.Events.change,j)}});e[c]=k}});_.extend(p.prototype,Backbone.Events,{set:function(e,j){this.x=e;this.y=j;return this},copy:function(e){this.x=e.x;this.y=e.y;return this},clear:function(){this.y=this.x=0;return this},clone:function(){return new p(this.x,this.y)},add:function(e,
j){this.x=e.x+j.x;this.y=e.y+j.y;return this},addSelf:function(e){this.x+=e.x;this.y+=e.y;return this},sub:function(e,j){this.x=e.x-j.x;this.y=e.y-j.y;return this},subSelf:function(e){this.x-=e.x;this.y-=e.y;return this},multiplySelf:function(e){this.x*=e.x;this.y*=e.y;return this},multiplyScalar:function(e){this.x*=e;this.y*=e;return this},divideScalar:function(e){e?(this.x/=e,this.y/=e):this.set(0,0);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+
this.y*e.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var j=this.x-e.x;e=this.y-e.y;return j*j+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>this.distanceTo(e)},lerp:function(e,j){return this.set((e.x-this.x)*
j+this.x,(e.y-this.y)*j+this.y)},isZero:function(){return 1E-4>this.length()}});var l={set:function(e,j){this._x=e;this._y=j;return this.trigger(Two.Events.change)},copy:function(e){this._x=e.x;this._y=e.y;return this.trigger(Two.Events.change)},clear:function(){this._y=this._x=0;return this.trigger(Two.Events.change)},clone:function(){return new p(this._x,this._y)},add:function(e,j){this._x=e.x+j.x;this._y=e.y+j.y;return this.trigger(Two.Events.change)},addSelf:function(e){this._x+=e.x;this._y+=
e.y;return this.trigger(Two.Events.change)},sub:function(e,j){this._x=e.x-j.x;this._y=e.y-j.y;return this.trigger(Two.Events.change)},subSelf:function(e){this._x-=e.x;this._y-=e.y;return this.trigger(Two.Events.change)},multiplySelf:function(e){this._x*=e.x;this._y*=e.y;return this.trigger(Two.Events.change)},multiplyScalar:function(e){this._x*=e;this._y*=e;return this.trigger(Two.Events.change)},divideScalar:function(e){return e?(this._x/=e,this._y/=e,this.trigger(Two.Events.change)):this.clear()},
negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this._x*e.x+this._y*e.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var j=this._x-e.x;e=this._y-e.y;return j*j+e*e},setLength:function(e){return this.normalize().multiplyScalar(e)},equals:function(e){return 1E-4>
this.distanceTo(e)},lerp:function(e,j){return this.set((e.x-this._x)*j+this._x,(e.y-this._y)*j+this._y)},isZero:function(){return 1E-4>this.length()}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){this._bound||(Two.Vector.MakeGetterSetter(this,"x",this.x),Two.Vector.MakeGetterSetter(this,"y",this.y),_.extend(this,l),this._bound=!0);Backbone.Events.bind.apply(this,arguments);return this}})();(function(){_.range(6);var p=Math.cos,l=Math.sin,e=Math.tan,j=Two.Matrix=function(e,c,b,h,r,a){this.elements=new Two.Array(9);var m=e;_.isArray(m)||(m=_.toArray(arguments));this.identity().set(m)};_.extend(j,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,c){if(3>=c.length){var b=c[0]||0,h=c[1]||0,r=c[2]||0;return{x:e[0]*b+e[1]*h+e[2]*r,y:e[3]*b+e[4]*h+e[5]*r,z:e[6]*b+e[7]*h+e[8]*r}}var b=e[0],h=e[1],r=e[2],a=e[3],m=e[4],q=e[5],v=e[6],f=e[7],j=e[8],l=c[0],p=c[1],s=c[2],w=c[3],n=c[4],t=c[5],d=c[6],
x=c[7],z=c[8];return[b*l+h*w+r*d,b*p+h*n+r*x,b*s+h*t+r*z,a*l+m*w+q*d,a*p+m*n+q*x,a*s+m*t+q*z,v*l+f*w+j*d,v*p+f*n+j*x,v*s+f*t+j*z]}});_.extend(j.prototype,Backbone.Events,{set:function(e,c,b,h,r,a){var m=e;_.isArray(m)||(m=_.toArray(arguments));_.each(m,function(a,b){_.isNumber(a)&&(this.elements[b]=a)},this);return this.trigger(Two.Events.change)},identity:function(){this.set(j.Identity);return this},multiply:function(e,c,b,h,r,a,m,q,v){var f=arguments,j=f.length;if(1>=j)return _.each(this.elements,
function(a,b){this.elements[b]=a*e},this),this.trigger(Two.Events.change);if(3>=j)return e=e||0,c=c||0,b=b||0,r=this.elements,{x:r[0]*e+r[1]*c+r[2]*b,y:r[3]*e+r[4]*c+r[5]*b,z:r[6]*e+r[7]*c+r[8]*b};j=this.elements;A0=j[0];A1=j[1];A2=j[2];A3=j[3];A4=j[4];A5=j[5];A6=j[6];A7=j[7];A8=j[8];B0=f[0];B1=f[1];B2=f[2];B3=f[3];B4=f[4];B5=f[5];B6=f[6];B7=f[7];B8=f[8];this.elements[0]=A0*B0+A1*B3+A2*B6;this.elements[1]=A0*B1+A1*B4+A2*B7;this.elements[2]=A0*B2+A1*B5+A2*B8;this.elements[3]=A3*B0+A4*B3+A5*B6;this.elements[4]=
A3*B1+A4*B4+A5*B7;this.elements[5]=A3*B2+A4*B5+A5*B8;this.elements[6]=A6*B0+A7*B3+A8*B6;this.elements[7]=A6*B1+A7*B4+A8*B7;this.elements[8]=A6*B2+A7*B5+A8*B8;return this.trigger(Two.Events.change)},inverse:function(e){var c=this.elements;e=e||new Two.Matrix;var b=c[0],h=c[1],r=c[2],a=c[3],m=c[4],q=c[5],j=c[6],f=c[7],c=c[8],l=c*m-q*f,p=-c*a+q*j,u=f*a-m*j,s=b*l+h*p+r*u;if(!s)return null;s=1/s;e.elements[0]=l*s;e.elements[1]=(-c*h+r*f)*s;e.elements[2]=(q*h-r*m)*s;e.elements[3]=p*s;e.elements[4]=(c*b-
r*j)*s;e.elements[5]=(-q*b+r*a)*s;e.elements[6]=u*s;e.elements[7]=(-f*b+h*j)*s;e.elements[8]=(m*b-h*a)*s;return e},scale:function(e,c){1>=arguments.length&&(c=e);return this.multiply(e,0,0,0,c,0,0,0,1)},rotate:function(e){var c=p(e);e=l(e);return this.multiply(c,-e,0,e,c,0,0,0,1)},translate:function(e,c){return this.multiply(1,0,e,0,1,c,0,0,1)},skewX:function(k){k=e(k);return this.multiply(1,k,0,0,1,0,0,0,1)},skewY:function(k){k=e(k);return this.multiply(1,0,0,k,1,0,0,0,1)},toString:function(){return this.toArray().join(" ")},
toArray:function(e){var c=this.elements,b=parseFloat(c[0].toFixed(3)),h=parseFloat(c[1].toFixed(3)),j=parseFloat(c[2].toFixed(3)),a=parseFloat(c[3].toFixed(3)),m=parseFloat(c[4].toFixed(3)),q=parseFloat(c[5].toFixed(3));if(e){e=parseFloat(c[6].toFixed(3));var v=parseFloat(c[7].toFixed(3)),c=parseFloat(c[8].toFixed(3));return[b,a,e,h,m,v,j,q,c]}return[b,a,h,m,j,q]},clone:function(){return new Two.Matrix(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],
this.elements[6],this.elements[7],this.elements[8])}})})();(function(){function p(c){var b={},e=c.id,r=c.translation,a=c.rotation,m=c.scale,q=c.stroke,v=c.linewidth,f=c.fill,l=c.opacity,p=c.visible,u=c.cap,s=c.join,w=c.miter,n=c.curved,t=c.closed,d=c.vertices;e&&(b.id=k.Identifier+e);r&&(_.isNumber(m)&&_.isNumber(a))&&(b.transform="matrix("+c._matrix.toString()+")");q&&(b.stroke=q);f&&(b.fill=f);l&&(b["stroke-opacity"]=b["fill-opacity"]=l);b.visibility=p?"visible":"hidden";u&&(b["stroke-linecap"]=u);s&&(b["stroke-linejoin"]=s);w&&(b["stroke-miterlimit"]=
w);v&&(b["stroke-width"]=v);d&&(b.d=j.toString(d,t,n));return b}var l=Two.Utils.getCurveFromPoints,e=Two.Utils.mod,j={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(c,b){var e=document.createElementNS(this.ns,c);"svg"===c&&(b=_.defaults(b||{},{version:this.version}));_.isObject(b)&&this.setAttributes(e,b);return e},setAttributes:function(c,b){_.each(b,function(b,c){this.setAttribute(c,b)},c);return this},removeAttributes:function(c,b){_.each(b,
function(b){this.removeAttribute(b)},c);return this},toString:function(c,b,h){var k=c.length,a=k-1;if(!h)return _.map(c,function(c,e){var f;f=(0>=e?"M":"L")+(" "+c.x.toFixed(3)+" "+c.y.toFixed(3));e>=a&&b&&(f+=" Z");return f}).join(" ");var m=l(c,b);return _.map(m,function(c,h){var f,j=b?e(h-1,k):Math.max(h-1,0),l=b?e(h+1,k):Math.min(h+1,a);f=m[j];var l=m[l],j=f.v.x.toFixed(3),p=f.v.y.toFixed(3),s=c.u.x.toFixed(3),w=c.u.y.toFixed(3),n=c.x.toFixed(3),t=c.y.toFixed(3);f=0>=h?"M "+n+" "+t:"C "+j+" "+
p+" "+s+" "+w+" "+n+" "+t;h>=a&&b&&(j=c.v.x.toFixed(3),p=c.v.y.toFixed(3),s=l.u.x.toFixed(3),w=l.u.y.toFixed(3),n=l.x.toFixed(3),t=l.y.toFixed(3),f=f+(" C "+j+" "+p+" "+s+" "+w+" "+n+" "+t)+" Z");return f}).join(" ")}},k=Two[Two.Types.svg]=function(){this.count=0;this.domElement=j.createElement("svg");this.elements=[];this.domElement.style.visibility="hidden";this.unveil=_.once(_.bind(function(){this.domElement.style.visibility="visible"},this))};_.extend(k,{Identifier:"two-",Utils:j});_.extend(k.prototype,
Backbone.Events,{setSize:function(c,b){this.width=c;this.height=b;j.setAttributes(this.domElement,{width:c,height:b});return this},add:function(c){var b=c,e=this.elements,k=this.domElement;_.isArray(c)||(b=_.map(arguments,function(a){return a}));_.each(b,function(a){var b;b=a instanceof Two.Group;if(_.isUndefined(a.id)){var c=this.count;this.count++;a.id=c}b?(b="g",_.isUndefined(a.parent)&&(a.parent=this,a.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this))),a=p(a),delete a.stroke,
delete a.fill,delete a["fill-opacity"],delete a["stroke-opacity"],delete a["stroke-linecap"],delete a["stroke-linejoin"],delete a["stroke-miterlimit"],delete a["stroke-width"]):(b="path",a=p(a));a=j.createElement(b,a);k.appendChild(a);e.push(a)},this);return this},update:function(c,b,e,k,a){var m=this.elements,q=m[c];switch(b){case Two.Properties.hierarchy:_.each(e,function(a){q.appendChild(m[a])});break;case Two.Properties.demotion:_.each(e,function(a){q.removeChild(m[a])});break;default:a:{c=b;
switch(c){case "matrix":c="transform";e="matrix("+e.toString()+")";break;case "visible":c="visibility";e=e?"visible":"hidden";break;case "cap":c="stroke-linecap";break;case "join":c="stroke-linejoin";break;case "miter":c="stroke-miterlimit";break;case "linewidth":c="stroke-width";break;case "vertices":c="d";e=j.toString(e,k,a);break;case "opacity":j.setAttributes(q,{"stroke-opacity":e,"fill-opacity":e});break a}q.setAttribute(c,e)}}return this},render:function(){this.unveil();return this}})})();(function(){var p=Two.Utils.getCurveFromPoints,l=Two.Utils.mod,e=function(b){_.each(b,function(b,c){this[c]=b},this);this.children=[]};_.extend(e.prototype,{appendChild:function(b){var c=b.parent;_.isUndefined(c)||c.removeChild(b);this.children.push(b);b.parent=this;return this},removeChild:function(b){b=_.indexOf(this.children,b);return 0>b?this:this.children.splice(b,1)[0]},render:function(b){var c=this.matrix;b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);_.each(this.children,function(c){c.render(b)});
b.restore();return this}});var j=function(b){_.each(b,function(b,c){this[c]=b},this)};_.extend(j.prototype,{render:function(b){var c=this.matrix,e=this.stroke,a=this.linewidth,m=this.fill,k=this.opacity,j=this.cap,f=this.join,p=this.miter,y=this.curved,u=this.closed,s=this.commands,w=s.length,n=w-1;if(!this.visible)return this;b.save();c&&b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);m&&(b.fillStyle=m);e&&(b.strokeStyle=e);a&&(b.lineWidth=a);p&&(b.miterLimit=p);f&&(b.lineJoin=f);j&&(b.lineCap=j);_.isNumber(k)&&
(b.globalAlpha=k);b.beginPath();_.each(s,function(a,d){var c=a.x.toFixed(3),f=a.y.toFixed(3);if(y){var e=u?l(d-1,w):Math.max(d-1,0),h=u?l(d+1,w):Math.min(d+1,n),m=s[e],h=s[h],e=m.v.x.toFixed(3),m=m.v.y.toFixed(3),k=a.u.x.toFixed(3),j=a.u.y.toFixed(3);0>=d?b.moveTo(c,f):(b.bezierCurveTo(e,m,k,j,c,f),d>=n&&u&&(e=a.v.x.toFixed(3),m=a.v.y.toFixed(3),k=h.u.x.toFixed(3),j=h.u.y.toFixed(3),c=h.x.toFixed(3),f=h.y.toFixed(3),b.bezierCurveTo(e,m,k,j,c,f)))}else 0>=d?b.moveTo(c,f):b.lineTo(c,f)});u&&!y&&b.closePath();
b.fill();b.stroke();b.restore()}});var k={devicePixelRatio:this.devicePixelRatio||1,getBackingStoreRatio:function(b){return b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1},getRatio:function(b){return this.devicePixelRatio/this.getBackingStoreRatio(b)},toArray:function(b,c,e){return!c?_.map(b,function(a){return{x:a.x,y:a.y}}):p(b,e)}},c=Two[Two.Types.canvas]=function(){this.count=0;this.domElement=document.createElement("canvas");
this.ctx=this.domElement.getContext("2d");this.overdraw=!1;this.elements=[];this.stage=null};_.extend(c,{Group:e,Element:j,getStyles:function(b){var c={},e=b.id,a=b._matrix,m=b.stroke,j=b.linewidth,l=b.fill,f=b.opacity,p=b.visible,y=b.cap,u=b.join,s=b.miter,w=b.curved,n=b.closed;b=b.vertices;e&&(c.id=e);_.isObject(a)&&(c.matrix=a.toArray());m&&(c.stroke=m);l&&(c.fill=l);_.isNumber(f)&&(c.opacity=f);y&&(c.cap=y);u&&(c.join=u);s&&(c.miter=s);j&&(c.linewidth=j);b&&(c.commands=k.toArray(b,w,n));c.visible=
!!p;c.curved=!!w;c.closed=!!n;return c},setStyles:function(b,c,e,a,m){switch(c){case "matrix":c="matrix";e=e.toArray();break;case "vertices":c="commands",b.curved=m,b.closed=a,e=k.toArray(e,b.curved,b.closed)}b[c]=e},Utils:k});_.extend(c.prototype,Backbone.Events,{setSize:function(b,c,e){this.width=b;this.height=c;this.ratio=_.isUndefined(e)?k.getRatio(this.ctx):e;this.domElement.width=b*this.ratio;this.domElement.height=c*this.ratio;_.extend(this.domElement.style,{width:b+"px",height:c+"px"});return this},
add:function(b){constructor=Object.getPrototypeOf(this).constructor;var c=b,e=this.elements,a=constructor.Group,m=constructor.Element,k=constructor.getStyles;_.isArray(b)||(c=_.map(arguments,function(a){return a}));_.each(c,function(b){var c;c=b instanceof Two.Group;var h=_.isNull(this.stage);if(_.isUndefined(b.id)){var j=this.count;this.count++;b.id=j}c?(c=k.call(this,b),delete c.stroke,delete c.fill,delete c.opacity,delete c.cap,delete c.join,delete c.miter,delete c.linewidth,c=new a(c),h&&(this.stage=
c,this.stage.object=b,b.parent=this,b.unbind(Two.Events.change).bind(Two.Events.change,_.bind(this.update,this)))):c=new m(k.call(this,b));e.push(c);h||this.stage.appendChild(c)},this);return this},update:function(b,c,e,a,m,k){var j=Object.getPrototypeOf(this).constructor,f=this.elements,l=f[b];switch(c){case Two.Properties.hierarchy:_.each(e,function(a){l.appendChild(f[a])});break;case Two.Properties.demotion:_.each(e,function(a){l.removeChild(f[a]);this.elements[a]=null},this);break;default:j.setStyles.call(this,
l,c,e,a,m,k)}return this},render:function(){if(_.isNull(this.stage))return this;1!==this.ratio&&(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio));this.overdraw||this.ctx.clearRect(0,0,this.width,this.height);this.stage.render(this.ctx);1!==this.ratio&&this.ctx.restore();return this}})})();(function(){function p(a,b){var c=Math.min(a.top,b.top),e=Math.min(a.left,b.left),f=Math.max(a.right,b.right),h=Math.max(a.bottom,b.bottom);return{top:c,left:e,right:f,bottom:h,width:f-e,height:h-c,centroid:{x:-e,y:-c}}}var l=Two[Two.Types.canvas],e=Two.Matrix.Multiply,j=Two[Two.Types.canvas].Utils.toArray,k=Two.Utils.mod,c=function(a){l.Group.call(this,a)};_.extend(c.prototype,l.Group.prototype,{appendChild:function(){l.Group.prototype.appendChild.apply(this,arguments);this.updateMatrix();return this},
updateTexture:function(a){_.each(this.children,function(b){b.updateTexture(a)});return this},updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=e(this.matrix,b);this._scale=this.scale*a;_.each(this.children,function(a){a.updateMatrix(this)},this);return this},render:function(a,b){_.each(this.children,function(c){c.render(a,b)})}});var b=function(a){l.Element.call(this,a)};_.extend(b.prototype,
l.Element.prototype,{updateMatrix:function(a){var b=a&&a._matrix||this.parent&&this.parent._matrix;a=a&&a._scale||this.parent&&this.parent._scale;if(!b)return this;this._matrix=e(this.matrix,b);this._scale=this.scale*a;return this},updateTexture:function(a){h.updateTexture(a,this);return this},render:function(a,b){if(!this.visible||!this.opacity||!this.buffer)return this;a.bindBuffer(a.ARRAY_BUFFER,this.textureCoordsBuffer);a.vertexAttribPointer(b.textureCoords,2,a.FLOAT,!1,0,0);a.bindTexture(a.TEXTURE_2D,
this.texture);a.uniformMatrix3fv(b.matrix,!1,this._matrix);a.bindBuffer(a.ARRAY_BUFFER,this.buffer);a.vertexAttribPointer(b.position,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);return this}});var h={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),getBoundingClientRect:function(a,b,c){var e=Infinity,f=-Infinity,h=Infinity,k=-Infinity;_.each(a,function(a){var b=a.x,m=a.y,j;h=Math.min(m,h);e=Math.min(b,e);f=Math.max(b,f);k=Math.max(m,k);c&&(b=a.u.x,m=a.u.y,j=a.v.x,
a=a.v.y,h=Math.min(m,a,h),e=Math.min(b,j,e),f=Math.max(b,j,f),k=Math.max(m,a,k))});_.isNumber(b)&&(h-=b,e-=b,f+=b,k+=b);return{top:h,left:e,right:f,bottom:k,width:f-e,height:k-h,centroid:{x:-e,y:-h}}},getTriangles:function(a){var b=a.top,c=a.left,e=a.right;a=a.bottom;return new Two.Array([c,b,e,b,c,a,c,a,e,b,e,a])},updateCanvas:function(a){var b=a.commands,c=this.canvas,e=this.ctx,f=a._scale,h=a.stroke,j=a.linewidth*f,l=a.fill,r=a.opacity,p=a.cap,n=a.join,t=a.miter,d=a.curved,x=a.closed,z=b.length,
K=z-1;c.width=Math.max(Math.ceil(a.rect.width*f),1);c.height=Math.max(Math.ceil(a.rect.height*f),1);a=a.rect.centroid;var F=a.x*f,C=a.y*f;e.clearRect(0,0,c.width,c.height);l&&(e.fillStyle=l);h&&(e.strokeStyle=h);j&&(e.lineWidth=j);t&&(e.miterLimit=t);n&&(e.lineJoin=n);p&&(e.lineCap=p);_.isNumber(r)&&(e.globalAlpha=r);e.beginPath();_.each(b,function(a,c){var h=(a.x*f+F).toFixed(3),j=(a.y*f+C).toFixed(3);if(d){var l=x?k(c-1,z):Math.max(c-1,0),q=x?k(c+1,z):Math.min(c+1,K),r=b[l],q=b[q],l=(r.v.x*f+F).toFixed(3),
r=(r.v.y*f+C).toFixed(3),g=(a.u.x*f+F).toFixed(3),n=(a.u.y*f+C).toFixed(3);0>=c?e.moveTo(h,j):(e.bezierCurveTo(l,r,g,n,h,j),c>=K&&x&&(l=(a.v.x*f+F).toFixed(3),r=(a.v.y*f+C).toFixed(3),g=(q.u.x*f+F).toFixed(3),n=(q.u.y*f+C).toFixed(3),h=(q.x*f+F).toFixed(3),j=(q.y*f+C).toFixed(3),e.bezierCurveTo(l,r,g,n,h,j)))}else 0>=c?e.moveTo(h,j):e.lineTo(h,j)});x&&!d&&e.closePath();e.fill();e.stroke()},updateTexture:function(a,b){this.updateCanvas(b);b.texture&&a.deleteTexture(b.texture);a.bindBuffer(a.ARRAY_BUFFER,
b.textureCoordsBuffer);b.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b.texture);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);0>=this.canvas.width||0>=this.canvas.height||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b.buffer)&&a.deleteBuffer(b.buffer);b.buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
b.buffer);a.enableVertexAttribArray(c.position);a.bufferData(a.ARRAY_BUFFER,b.triangles,a.STATIC_DRAW);_.isObject(b.textureCoordsBuffer)&&a.deleteBuffer(b.textureCoordsBuffer);b.textureCoordsBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b.textureCoordsBuffer);a.enableVertexAttribArray(c.textureCoords);a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){var c=a.createProgram();_.each(b,function(b){a.attachShader(c,b)});a.linkProgram(c);if(!a.getProgramParameter(c,
a.LINK_STATUS))throw error=a.getProgramInfoLog(c),a.deleteProgram(c),new Two.Utils.Error("unable to link program: "+error);return c}},shaders:{create:function(a,b,c){c=a.createShader(a[c]);a.shaderSource(c,b);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw b=a.getShaderInfoLog(c),a.deleteShader(c),new Two.Utils.Error("unable to compile shader "+c+": "+b);return c},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:"attribute vec2 a_position;\nattribute vec2 a_textureCoords;\n\nuniform mat3 u_matrix;\nuniform vec2 u_resolution;\n\nvarying vec2 v_textureCoords;\n\nvoid main() {\n   vec2 projected = (u_matrix * vec3(a_position, 1)).xy;\n   vec2 normal = projected / u_resolution;\n   vec2 clipspace = (normal * 2.0) - 1.0;\n\n   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n   v_textureCoords = a_textureCoords;\n}",
fragment:"precision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_textureCoords;\n\nvoid main() {\n  gl_FragColor = texture2D(u_image, v_textureCoords);\n}"}};h.ctx=h.canvas.getContext("2d");var r=Two[Two.Types.webgl]=function(a){this.count=0;this.domElement=document.createElement("canvas");this.elements=[];this.stage=null;a=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!1});a=this.ctx=this.domElement.getContext("webgl",a)||this.domElement.getContext("experimental-webgl",
a);if(!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");var b=h.shaders.create(a,h.shaders.vertex,h.shaders.types.vertex),c=h.shaders.create(a,h.shaders.fragment,h.shaders.types.fragment);this.program=h.program.create(a,[b,c]);a.useProgram(this.program);this.program.position=a.getAttribLocation(this.program,"a_position");this.program.matrix=a.getUniformLocation(this.program,"u_matrix");this.program.textureCoords=a.getAttribLocation(this.program,"a_textureCoords");
a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)};_.extend(r,{Group:c,Element:b,getStyles:function(a){var c={},e=a.id,k=a._matrix,f=a.stroke,l=a.linewidth,r=a.fill,p=a.opacity,s=a.visible,w=a.cap,n=a.join,t=a.miter,d=a.curved,x=a.closed,z=a.vertices;e&&(c.id=e);_.isObject(k)&&(c.matrix=c._matrix=k.toArray(!0),c.scale=c._scale=1);f&&(c.stroke=f);r&&(c.fill=r);_.isNumber(p)&&(c.opacity=
p);w&&(c.cap=w);n&&(c.join=n);t&&(c.miter=t);l&&(c.linewidth=l);z&&(c.vertices=j(z,d,x),c.commands=c.vertices,c.rect=h.getBoundingClientRect(c.commands,c.linewidth,c.curved),c.triangles=h.getTriangles(c.rect));c.visible=!!s;c.curved=!!d;c.closed=!!x;a instanceof Two.Polygon&&(h.updateBuffer(this.ctx,c,this.program),b.prototype.updateTexture.call(c,this.ctx));return c},setStyles:function(a,b,c,e,f,k){var l=!1;/matrix/.test(b)?(a[b]=c.toArray(!0),_.isNumber(e)&&(l=a.scale!==e,a.scale=e),a.updateMatrix()):
/(stroke|fill|opacity|cap|join|miter|linewidth)/.test(b)?(a[b]=c,a.rect=p(h.getBoundingClientRect(a.commands,a.linewidth,a.curved),a.rect),a.triangles=h.getTriangles(a.rect),h.updateBuffer(this.ctx,a,this.program),l=!0):"vertices"===b?(_.isUndefined(e)||(a.closed=e),_.isUndefined(f)||(a.curved=f),k?a.commands=j(c,a.curved,a.closed):(a.vertices=j(c,a.curved,a.closed),a.commands=a.vertices),a.rect=p(h.getBoundingClientRect(a.vertices,a.linewidth,a.curved),a.rect),a.triangles=h.getTriangles(a.rect),
h.updateBuffer(this.ctx,a,this.program),l=!0):a[b]=c;l&&a.updateTexture(this.ctx)}});_.extend(r.prototype,Backbone.Events,l.prototype,{setSize:function(a,b){l.prototype.setSize.apply(this,arguments);this.ratio=1;this.domElement.width=a;this.domElement.height=b;this.ctx.viewport(0,0,a,b);var c=this.ctx.getUniformLocation(this.program,"u_resolution");this.ctx.uniform2f(c,a,b);return this},render:function(){if(_.isNull(this.stage))return this;this.stage.render(this.ctx,this.program);return this}})})();(function(){var p=Two.Shape=function(l){this._matrix=new Two.Matrix;var e=_.debounce(_.bind(function(){var e=this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation);this.trigger(Two.Events.change,this.id,"matrix",e,this.scale)},this),0);this._rotation=0;Object.defineProperty(this,"rotation",{get:function(){return this._rotation},set:function(j){this._rotation=j;e()}});this._scale="scale";Object.defineProperty(this,"scale",{get:function(){return this._scale},
set:function(j){this._scale=j;e()}});this.translation=new Two.Vector;this.rotation=0;this.scale=1;this.translation.bind(Two.Events.change,e);if(l)return this;p.MakeGetterSetter(this,p.Properties);this.fill="#fff";this.stroke="#000";this.opacity=this.linewidth=1;this.visible=!0;this.join=this.cap="round";this.miter=1};_.extend(p,{Properties:"fill stroke linewidth opacity visible cap join miter".split(" "),MakeGetterSetter:function(l,e){_.isArray(e)||(e=[e]);_.each(e,function(e){var k="_"+e;Object.defineProperty(l,
e,{get:function(){return this[k]},set:function(c){this[k]=c;this.trigger(Two.Events.change,this.id,e,c,this)}})})}});_.extend(p.prototype,Backbone.Events,{addTo:function(l){l.add(this);return this},noFill:function(){this.fill="transparent";return this},noStroke:function(){this.stroke="transparent";return this},clone:function(){var l=new p;l.translation.copy(this.translation);_.each(p.Properties,function(e){l[e]=this[e]},this);return this}})})();(function(){var p=Two.Group=function(){Two.Shape.call(this,!0);delete this.stroke;delete this.fill;delete this.linewidth;delete this.opacity;delete this.cap;delete this.join;delete this.miter;p.MakeGetterSetter(this,Two.Shape.Properties);this.children={}};_.extend(p,{MakeGetterSetter:function(l,e){_.isArray(e)||(e=[e]);_.each(e,function(e){var k="_"+e;Object.defineProperty(l,e,{get:function(){return this[k]},set:function(c){this[k]=c;_.each(this.children,function(b){b[e]=c})}})})}});_.extend(p.prototype,
Two.Shape.prototype,{clone:function(l){l=l||this.parent;var e=_.map(this.children,function(e){return e.clone(l)}),j=new p;l.add(j);j.add(e);j.translation.copy(this.translation);j.rotation=this.rotation;j.scale=this.scale;return j},corner:function(){var l=this.getBoundingClientRect(!0),e={x:l.left,y:l.top};_.each(this.children,function(j){j.translation.subSelf(e)});return this},center:function(){var l=this.getBoundingClientRect(!0);l.centroid={x:l.left+l.width/2,y:l.top+l.height/2};_.each(this.children,
function(e){e.translation.subSelf(l.centroid)});return this},add:function(l){var e=l,j=this.children,k=this.parent,c=[];_.isArray(l)||(e=_.toArray(arguments));var b=_.bind(function(b,c,a,e,k,j){this.trigger(Two.Events.change,b,c,a,e,k,j)},this);_.each(e,function(e){if(e){var l=e.id,a=e.parent;_.isUndefined(l)&&(k.add(e),l=e.id);_.isUndefined(j[l])&&(a&&delete a.children[l],j[l]=e,e.parent=this,e.unbind(Two.Events.change).bind(Two.Events.change,b),c.push(l))}},this);0<c.length&&this.trigger(Two.Events.change,
this.id,Two.Properties.hierarchy,c);return this},remove:function(l){var e=l,j=this.children,k=this.parent,c=[];if(0>=arguments.length&&k)return k.remove(this),this;_.isArray(l)||(e=_.toArray(arguments));_.each(e,function(b){var e=b.id;e in j&&(delete j[e],delete b.parent,b.unbind(Two.Events.change),c.push(e))});0<c.length&&this.trigger(Two.Events.change,this.id,Two.Properties.demotion,c);return this},getBoundingClientRect:function(l){var e=Infinity,j=-Infinity,k=Infinity,c=-Infinity;_.each(this.children,
function(b){b=b.getBoundingClientRect(!0);k&&(e&&j&&c)&&(k=Math.min(b.top,k),e=Math.min(b.left,e),j=Math.max(b.right,j),c=Math.max(b.bottom,c))},this);var b=l?this._matrix:Two.Utils.getComputedMatrix(this);l=b.multiply(e,k,1);b=b.multiply(j,c,1);return{top:l.y,left:l.x,right:b.x,bottom:b.y,width:b.x-l.x,height:b.y-l.y}},noFill:function(){_.each(this.children,function(l){l.noFill()});return this},noStroke:function(){_.each(this.children,function(l){l.noStroke()});return this}})})();(function(){var p=Math.min,l=Math.max,e=Math.round,j=Two.Polygon=function(k,c,b){Two.Shape.call(this);c=!!c;b=!!b;var h=0,j=1,a=!1,m=!1,q,v=[],f=_.debounce(_.bind(function(){var f,k;if(a||m){f=q.length;k=f-1;f=e(h*k);k=e(j*k);for(v.length=0;f<k+1;f++)v.push(q[f])}this.trigger(Two.Events.change,this.id,"vertices",v,c,b,a);m=a=!1},this),0);Object.defineProperty(this,"closed",{get:function(){return c},set:function(a){c=!!a;f()}});Object.defineProperty(this,"curved",{get:function(){return b},set:function(a){b=
!!a;f()}});Object.defineProperty(this,"beginning",{get:function(){return h},set:function(b){h=p(l(b,0),1);a=!0;f()}});Object.defineProperty(this,"ending",{get:function(){return j},set:function(b){j=p(l(b,0),1);a=!0;f()}});Object.defineProperty(this,"vertices",{get:function(){return q},set:function(a){var b=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,f)},this);m=!0;f()},this),c=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,f)},this);m=!0;f()},this);q&&q.unbind();
q=new Two.Utils.Collection(a.slice(0));q.bind(Two.Events.insert,b);q.bind(Two.Events.remove,c);m=!0;b(q)}});this.vertices=k};_.extend(j.prototype,Two.Shape.prototype,{clone:function(){var e=_.map(this.vertices,function(b){return new Two.Vector(b.x,b.y)}),c=new j(e,this.closed,this.curved);_.each(Two.Shape.Properties,function(b){c[b]=this[b]},this);c.translation.copy(this.translation);c.rotation=this.rotation;c.scale=this.scale;return c},corner:function(){var e=this.getBoundingClientRect(!0),c={x:e.left,
y:e.top};_.each(this.vertices,function(b){b.subSelf(c)});return this},center:function(){var e=this.getBoundingClientRect(!0);e.centroid={x:e.left+e.width/2,y:e.top+e.height/2};_.each(this.vertices,function(c){c.subSelf(e.centroid)});return this},remove:function(){if(!this.parent)return this;this.parent.remove(this);return this},getBoundingClientRect:function(e){var c=this.linewidth,b=Infinity,h=-Infinity,j=Infinity,a=-Infinity;_.each(this.vertices,function(c){var e=c.x;c=c.y;j=Math.min(c,j);b=Math.min(e,
b);h=Math.max(e,h);a=Math.max(c,a)});j-=c;b-=c;h+=c;a+=c;c=e?this._matrix:Two.Utils.getComputedMatrix(this);e=c.multiply(b,j,1);c=c.multiply(h,a,1);return{top:e.y,left:e.x,right:c.x,bottom:c.y,width:c.x-e.x,height:c.y-e.y}}})})();
